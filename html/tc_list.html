<!DOCTYPE html>
	<html>
	<head>
	  <title>Continuum - QA Status</title>
	  
	  
	  <style>
		H2 {
		color: orange;
		font-family: verdana;
		text-align: center;
		}
		
		select, label{
		color: black;
		font-family: verdana;
		text-align: center;			
		}
		
		#selectFormatting {
  			display: inline-block;
		}
		

	</style>
	  
	  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	  <script type="text/javascript">
            
       
      function drawTable() {
    	  
    	  //getting GET params from the URL
    	  let params = (new URL(location)).searchParams;
    	   
    	  var testCaseStatus = params.get('status');
    	  var applicationName = params.get('app');
    	  var range = params.get('range');
    	  
    	  //ajax call for getting data from Database by DBconnection.php
    	  var jsonData = $.ajax({
    		  url: "/DBConnectionProject/src/ExecutionDetails.php",
    		  type:"POST",
    		  data: {status:testCaseStatus, application:applicationName, range:range },
    		  dataType: "json",
    		  async: false
    		  }).responseText;
    	  
    	  var data = JSON.parse(jsonData);
    	  
    	 	 
    	 	 $("#main").html('');
      		var body = document.body;
      		
      		var div = document.createElement('div');
      		div.id='main';
      		
      		var para = document.createElement("P");         // Create a <p> element
      		var t1 = document.createTextNode("Please find below the list of "); 
      		var	t2 = document.createTextNode(testCaseStatus);
      		var t3 = document.createTextNode(" test cases for ");
      		var t4 = document.createTextNode(applicationName);   
      				
      		para.appendChild(t1);para.appendChild(t2);para.appendChild(t3);para.appendChild(t4);
      		
      		div.appendChild(para);
      		
      	    tbl  = document.createElement('table');
      	    
      	    tbl.style.width  = 'auto';
      	    tbl.style.border = '2px solid black';
      	  	tbl.style.fontFamily ='calibri';
      	    
      	  	var header = tbl.createTHead();
      	  	var tr = header.insertRow(0);
   	   		tr.style.backgroundColor = '#42f4e2';
   	   		   	   	 	
   	   		
   	   		var td = tr.insertCell();
      		td.appendChild(document.createTextNode('Application'));
      		td.style.border = '1px solid black';
   	    
   	    	td = tr.insertCell();
          	td.appendChild(document.createTextNode('Test Suite ID'));
          	td.style.width="auto";
          	td.style.border = '1px solid black';
          	
           var td = tr.insertCell();
           td.appendChild(document.createTextNode('Test Case ID'));
           td.style.border = '1px solid black';
           
           var td = tr.insertCell();
           td.appendChild(document.createTextNode('Test Case Name'));
           td.style.width="auto";
           td.style.border = '1px solid black';
           
           var td= tr.insertCell();
           td.appendChild(document.createTextNode('Execution Date'));
           td.style.border = '1px solid black';
           
           var td = tr.insertCell();
           td.appendChild(document.createTextNode('Execution Time'));
           td.style.border = '1px solid black';
           
           
           var td = tr.insertCell();
           td.appendChild(document.createTextNode('Execution Description'));
           td.style.border = '1px solid black';
           td.style.height="auto";
           td.style.width="auto";
   		   
      	    
    	for (var i=0; i< data.length; i++){
    		    	     	    
     	        var tr = tbl.insertRow();
     	        	
	     	    var td = tr.insertCell();
		        td.appendChild(document.createTextNode(data[i]['ApplicationName']));
		        td.style.border = '1px solid black';
		        
		        var td = tr.insertCell();
 	            td.appendChild(document.createTextNode(data[i]['TestSuiteID']));
 	            td.style.border = '1px solid black';
 	            
 	           	var td = tr.insertCell();
	            td.appendChild(document.createTextNode(data[i]['TestCaseID']));
	            td.style.border = '1px solid black';
	            
	            var td = tr.insertCell();
 	            td.appendChild(document.createTextNode(data[i]['TestCaseName']));
 	            td.style.border = '1px solid black';
 	            
 	           	var td = tr.insertCell();
	            td.appendChild(document.createTextNode(data[i]['ExecutionDate']));
	            td.style.border = '1px solid black';
	            
	            var td = tr.insertCell();
 	            td.appendChild(document.createTextNode(data[i]['ExecutionTime']));
 	            td.style.border = '1px solid black';
 	            
 	           	var td = tr.insertCell();
	            td.appendChild(document.createTextNode(parseDescrition(data[i]['ExecutionDescription'])));
	            td.style.border = '1px solid black';
		        
    	
    	}
     	
    	div.appendChild(tbl);
     	body.appendChild(div);
        	 
    	 
      
      }
      
      function parseDescrition(description){
    	  
    	  console.log("inside function....  " +description);
    	  
    	  description = description.replace(/(?:\r\n|\r|\n)/g, '');
    	  return description;
      }
    	 
    	 </script>
	</head>
	<body onload="drawTable()">
	
	<div id="heading">
    <img style="float:left" src="/logo.jpg" alt="Continuum Logo"><br>
    <H2>Engineering QA Automation Status</H2> <br>
    </div>
	  
	</body>
	</html>